webpackJsonp([1],{"47SK":function(e,t){},BUum:function(e,t){},C0ZF:function(e,t){},Cg0G:function(e,t){},IGXj:function(e,t){},KnU3:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),n={name:"App",created:function(){console.log(1);var e=document.getElementById("loading");null!==e&&document.body.removeChild(e)}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")(n,i,!1,function(e){a("n37O")},null,null).exports,r=a("/ocq"),l={data:function(){return{studentID:"",major:"",klass:"",birthday:"",year:"",school:"",collage:"",name:"",phoneNumber:"",password:""}},components:{},methods:{register:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/register",data:{student_id:this.studentID,student_password:this.password,student_name:this.name,student_birthday:this.birthday,student_phone:this.phoneNumber,student_school:this.school,student_department:this.collage,student_year:this.year,student_major:this.major,student_class:this.klass},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data&&e.$message({message:"注册成功",type:"success",onClose:function(){e.$router.push("/")}})})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register-container"},[a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("学校：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.school,callback:function(t){e.school=t},expression:"school"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("学号：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.studentID,callback:function(t){e.studentID=t},expression:"studentID"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("院系：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.collage,callback:function(t){e.collage=t},expression:"collage"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("专业：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.major,callback:function(t){e.major=t},expression:"major"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("班级：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.klass,callback:function(t){e.klass=t},expression:"klass"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("姓名：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("生日：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.birthday,callback:function(t){e.birthday=t},expression:"birthday"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("入学年份：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年份","value-format":"yyyy"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("联系方式：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}})],1)],1),e._v(" "),a("el-row",{staticClass:"register-input",attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:5}},[e._v("密码：")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),a("div",{staticClass:"register-btns"},[a("el-button",{on:{click:function(t){return e.register()}}},[e._v("注册")])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("C0ZF")},"data-v-63a1579d",null).exports,d={data:function(){return{username:"",password:""}},components:{},methods:{turnToRegisterPage:function(){this.$router.push("/register")},turnToMainPage:function(){this.$router.push("/main")},login:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/login",data:{student_id:this.username,student_password:this.password},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data.status?(e.global.token=t.data.token,e.global.account=e.username,localStorage.setItem("token",t.data.token),localStorage.setItem("account",e.username),e.turnToMainPage()):e.$message({message:"账号或密码错误！",type:"error"})})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-box"},[e._m(0),e._v(" "),a("p",{staticClass:"login-title"},[e._v("Whale Printer")]),e._v(" "),a("el-row",{staticClass:"username-input",attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:6}},[e._v("用户名：")]),e._v(" "),a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{span:10},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),e._v(" "),a("el-row",{staticClass:"password-input"},[a("el-col",{attrs:{span:6}},[e._v("密码：")]),e._v(" "),a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),a("div",{staticClass:"login-btns"},[a("p",{staticClass:"login-tip",on:{click:function(t){return e.turnToRegisterPage()}}},[e._v("还没有账号？点击注册")]),e._v(" "),a("el-button",{on:{click:function(t){return e.login()}}},[e._v("登录")])],1)],1),e._v(" "),a("p",[e._v("官方测试账号：20181009999")]),e._v(" "),a("p",[e._v("测试密码：123")]),e._v(" "),a("p",[e._v("（仅供计算机设计大赛使用，请勿恶意用途）")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-logo-container"},[t("img",{staticClass:"login-logo",attrs:{src:a("kWZM")}})])}]};var v=a("VU/8")(d,p,!1,function(e){a("Cg0G")},"data-v-5cd3e0f4",null).exports,h={data:function(){return{username:"",imgUrl:"",activeIndex:"/DataCheck"}},created:function(){localStorage.getItem("token")&&localStorage.getItem("account")?(this.global.token=localStorage.getItem("token"),this.global.account=localStorage.getItem("account")):this.$router.push("/"),this.getUserInfo(),this.getUserAvatar()},components:{},methods:{getUserInfo:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/getInfo",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){e.username=t.data.student_name})},getUserAvatar:function(){var e=this,t=(new Date).getTime();this.axios({method:"GET",url:"http://whale.vipgz4.idcfengye.com/getImg/"+this.global.account+".jpg?v="+t}).then(function(a){e.imgUrl="http://whale.vipgz4.idcfengye.com/getImg/"+e.global.account+".jpg?v="+t})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-container"},[a("el-row",[a("el-col",{staticClass:"left-navi",attrs:{span:4}},[a("div",{staticClass:"user-avatar"},[a("img",{attrs:{src:e.imgUrl}}),e._v(" "),a("h4",[e._v(e._s(e.username))])]),e._v(" "),a("el-menu",{attrs:{"default-active":e.$route.path,"background-color":"#545c64","text-color":"#fff",router:""}},[a("el-menu-item",{attrs:{index:"/main"}},[e._v("个人记录总览")]),e._v(" "),a("el-menu-item",{attrs:{index:"/Group"}},[e._v("团队  ·  一起鲸记")]),e._v(" "),a("el-menu-item",{attrs:{index:"/Person"}},[e._v("个人信息")]),e._v(" "),a("el-menu-item",{attrs:{index:"/AboutUs"}},[e._v("关于我们")]),e._v(" "),a("el-menu-item",{attrs:{index:"/Output"}},[e._v("数据导出")])],1)],1),e._v(" "),a("el-col",{staticClass:"main-content",attrs:{span:20}},[a("router-view",{on:{updateImg:function(t){return e.getUserAvatar()}}})],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,m,!1,function(e){a("47SK")},"data-v-297c3910",null).exports,f=a("//Fk"),_=a.n(f),w=a("fZjL"),y=a.n(w),b=a("pFYg"),C=a.n(b),k=a("woOf"),x=a.n(k),L=a("74/Y"),I=a("Bb9R"),T=a("g3c9"),S=a("eyka"),D={props:{field:{type:String,default:"avatar"},ki:{default:0},value:{default:!0},url:{type:String,default:""},params:{type:Object,default:null},headers:{type:Object,default:null},width:{type:Number,default:200},height:{type:Number,default:200},noRotate:{type:Boolean,default:!0},noCircle:{type:Boolean,default:!1},noSquare:{type:Boolean,default:!1},maxSize:{type:Number,default:10240},langType:{type:String,default:"zh"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"},imgBgc:{type:String,default:"#fff"},withCredentials:{type:Boolean,default:!1},method:{type:String,default:"POST"}},data:function(){var e=this.imgFormat,t=this.langType,a=this.langExt,s=this.width,n=this.height,i=!0,o=-1===["jpg","png"].indexOf(e)?"jpg":e,r=L.a[t]?L.a[t]:L.a.en,l=I.a[o];return this.imgFormat=o,a&&x()(r,a),"function"!=typeof FormData&&(i=!1),{mime:l,lang:r,isSupported:i,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,progress:0,hasError:!1,errorMsg:"",ratio:s/n,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},previewContainer:{width:100,height:100},sourceImgContainer:{width:240,height:184},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{progressStyle:function(){return{width:this.progress+"%"}},sourceImgStyle:function(){var e=this.scale,t=this.sourceImgMasking;return{top:e.y+t.y+"px",left:e.x+t.x+"px",width:e.width+"px",height:e.height+"px"}},sourceImgMasking:function(){var e=this.width,t=this.height,a=this.ratio,s=this.sourceImgContainer,n=s.width/s.height,i=0,o=0,r=s.width,l=s.height,c=1;return a<n&&(c=s.height/t,r=s.height*a,i=(s.width-r)/2),a>n&&(c=s.width/e,l=s.width/a,o=(s.height-l)/2),{scale:c,x:i,y:o,width:r,height:l}},sourceImgShadeStyle:function(){var e=this.sourceImgMasking,t=this.sourceImgContainer,a=e;return{width:(a.width==t.width?a.width:(t.width-a.width)/2)+"px",height:(a.height==t.height?a.height:(t.height-a.height)/2)+"px"}},previewStyle:function(){this.width,this.height;var e=this.ratio,t=this.previewContainer,a=t.width,s=t.height,n=a/s;return e<n&&(a=t.height*e),e>n&&(s=t.width/e),{width:a+"px",height:s+"px"}}},watch:{value:function(e){e&&1!=this.loading&&this.reset()}},methods:{ripple:function(e){Object(S.a)(e)},off:function(){var e=this;setTimeout(function(){e.$emit("input",!1),3==e.step&&2==e.loading&&e.setStep(1)},200)},setStep:function(e){var t=this;setTimeout(function(){t.step=e},200)},preventDefault:function(e){return e.preventDefault(),!1},handleClick:function(e){1!==this.loading&&e.target!==this.$refs.fileinput&&(e.preventDefault(),document.activeElement!==this.$refs&&this.$refs.fileinput.click())},handleChange:function(e){if(e.preventDefault(),1!==this.loading){var t=e.target.files||e.dataTransfer.files;this.reset(),this.checkFile(t[0])&&this.setSourceImg(t[0])}},checkFile:function(e){var t=this.lang,a=this.maxSize;return-1===e.type.indexOf("image")?(this.hasError=!0,this.errorMsg=t.error.onlyImg,!1):!(e.size/1024>a)||(this.hasError=!0,this.errorMsg=t.error.outOfSize+a+"kb",!1)},reset:function(){this.loading=0,this.hasError=!1,this.errorMsg="",this.progress=0},setSourceImg:function(e){this.$emit("src-file-set",e.name,e.type,e.size);var t=this,a=new FileReader;a.onload=function(e){t.sourceImgUrl=a.result,t.startCrop()},a.readAsDataURL(e)},startCrop:function(){var e=this,t=e.width,a=e.height,s=e.ratio,n=e.scale,i=e.sourceImgUrl,o=e.sourceImgMasking,r=e.lang,l=o,c=new Image;c.src=i,c.onload=function(){var i=c.naturalWidth,o=c.naturalHeight,u=i/o,d=l.width,p=l.height,v=0,h=0;if(i<t||o<a)return e.hasError=!0,e.errorMsg=r.error.lowestPx+t+"*"+a,!1;s>u&&(p=d/u,h=(l.height-p)/2),s<u&&(d=p*u,v=(l.width-d)/2),n.range=0,n.x=v,n.y=h,n.width=d,n.height=p,n.minWidth=d,n.minHeight=p,n.maxWidth=i*l.scale,n.maxHeight=o*l.scale,n.naturalWidth=i,n.naturalHeight=o,e.sourceImg=c,e.createImg(),e.setStep(2)}},imgStartMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,a=this.sourceImgMouseDown,s=this.scale,n=a;n.mX=t.screenX,n.mY=t.screenY,n.x=s.x,n.y=s.y,n.on=!0},imgMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,a=this.sourceImgMouseDown,s=a.on,n=a.mX,i=a.mY,o=a.x,r=a.y,l=this.scale,c=this.sourceImgMasking,u=o+(t.screenX-n),d=r+(t.screenY-i);s&&(u>0&&(u=0),d>0&&(d=0),u<c.width-l.width&&(u=c.width-l.width),d<c.height-l.height&&(d=c.height-l.height),l.x=u,l.y=d)},rotateImg:function(e){var t=this.sourceImg,a=this.scale,s=a.naturalWidth,n=a.naturalHeight,i=n,o=s,r=this.$refs.canvas,l=r.getContext("2d");r.width=i,r.height=o,l.clearRect(0,0,i,o),l.fillStyle="rgba(0,0,0,0)",l.fillRect(0,0,i,o),l.translate(i,0),l.rotate(90*Math.PI/180),l.drawImage(t,0,0,s,n);var c=r.toDataURL(I.a.png);this.sourceImgUrl=c,this.startCrop()},startZoomAdd:function(e){var t=this,a=t.scale;a.zoomAddOn=!0,function e(){if(a.zoomAddOn){var s=a.range>=100?100:++a.range;t.zoomImg(s),setTimeout(function(){e()},60)}}()},endZoomAdd:function(e){this.scale.zoomAddOn=!1},startZoomSub:function(e){var t=this,a=t.scale;a.zoomSubOn=!0,function e(){if(a.zoomSubOn){var s=a.range<=0?0:--a.range;t.zoomImg(s),setTimeout(function(){e()},60)}}()},endZoomSub:function(e){this.scale.zoomSubOn=!1},zoomChange:function(e){this.zoomImg(e.target.value)},zoomImg:function(e){var t=this,a=this.sourceImgMasking,s=(this.sourceImgMouseDown,this.scale),n=s.maxWidth,i=s.maxHeight,o=s.minWidth,r=s.minHeight,l=s.width,c=s.height,u=s.x,d=s.y,p=(s.range,a),v=p.width,h=p.height,m=o+(n-o)*e/100,g=r+(i-r)*e/100,f=v/2-m/l*(v/2-u),_=h/2-g/c*(h/2-d);f>0&&(f=0),_>0&&(_=0),f<v-m&&(f=v-m),_<h-g&&(_=h-g),s.x=f,s.y=_,s.width=m,s.height=g,s.range=e,setTimeout(function(){s.range==e&&t.createImg()},300)},createImg:function(e){var t=this.imgFormat,a=this.imgBgc,s=this.mime,n=this.sourceImg,i=this.scale,o=i.x,r=i.y,l=i.width,c=i.height,u=this.sourceImgMasking.scale,d=this.$refs.canvas,p=d.getContext("2d");e&&(this.sourceImgMouseDown.on=!1),d.width=this.width,d.height=this.height,p.clearRect(0,0,this.width,this.height),p.fillStyle="png"==t?"rgba(0,0,0,0)":a,p.fillRect(0,0,this.width,this.height),p.drawImage(n,o/u,r/u,l/u,c/u),this.createImgUrl=d.toDataURL(s)},prepareUpload:function(){var e=this.url,t=this.createImgUrl,a=this.field,s=this.ki;this.$emit("crop-success",t,a,s),"string"==typeof e&&e?this.upload():this.off()},upload:function(){var e=this,t=this.lang,a=this.imgFormat,s=this.mime,n=this.url,i=this.params,o=this.headers,r=this.field,l=this.ki,c=this.createImgUrl,u=this.withCredentials,d=this.method,p=new FormData;p.append(r,Object(T.a)(c,s),r+"."+a),"object"==(void 0===i?"undefined":C()(i))&&i&&y()(i).forEach(function(e){p.append(e,i[e])});var v=function(t){t.lengthComputable&&(e.progress=100*Math.round(t.loaded)/t.total)};e.reset(),e.loading=1,e.setStep(3),new _.a(function(e,t){var a=new XMLHttpRequest;a.open(d,n,!0),a.withCredentials=u,a.onreadystatechange=function(){4===this.readyState&&(200===this.status||201===this.status?e(JSON.parse(this.responseText)):t(this.status))},a.upload.addEventListener("progress",v,!1),"object"==(void 0===o?"undefined":C()(o))&&o&&y()(o).forEach(function(e){a.setRequestHeader(e,o[e])}),a.send(p)}).then(function(t){e.value&&(e.loading=2,e.$emit("crop-upload-success",t,r,l))},function(a){e.value&&(e.loading=3,e.hasError=!0,e.errorMsg=t.fail,e.$emit("crop-upload-fail",a,r,l))})}},created:function(){var e=this;document.addEventListener("keyup",function(t){!e.value||"Escape"!=t.key&&27!=t.keyCode||e.off()})}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"vue-image-crop-upload"},[a("div",{staticClass:"vicp-wrap"},[a("div",{staticClass:"vicp-close",on:{click:e.off}},[a("i",{staticClass:"vicp-icon4"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}],staticClass:"vicp-step1"},[a("div",{staticClass:"vicp-drop-area",on:{dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,click:e.handleClick,drop:e.handleChange}},[a("i",{directives:[{name:"show",rawName:"v-show",value:1!=e.loading,expression:"loading != 1"}],staticClass:"vicp-icon1"},[a("i",{staticClass:"vicp-icon1-arrow"}),e._v(" "),a("i",{staticClass:"vicp-icon1-body"}),e._v(" "),a("i",{staticClass:"vicp-icon1-bottom"})]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.loading,expression:"loading !== 1"}],staticClass:"vicp-hint"},[e._v(e._s(e.lang.hint))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isSupported,expression:"!isSupported"}],staticClass:"vicp-no-supported-hint"},[e._v(e._s(e.lang.noSupported))]),e._v(" "),1==e.step?a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileinput",attrs:{type:"file"},on:{change:e.handleChange}}):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[a("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\r\n\t\t\t")]),e._v(" "),a("div",{staticClass:"vicp-operate"},[a("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.off))])])]),e._v(" "),2==e.step?a("div",{staticClass:"vicp-step2"},[a("div",{staticClass:"vicp-crop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-left"},[a("div",{staticClass:"vicp-img-container"},[a("img",{ref:"img",staticClass:"vicp-img",style:e.sourceImgStyle,attrs:{src:e.sourceImgUrl,draggable:"false"},on:{drag:e.preventDefault,dragstart:e.preventDefault,dragend:e.preventDefault,dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,drop:e.preventDefault,touchstart:e.imgStartMove,touchmove:e.imgMove,touchend:e.createImg,touchcancel:e.createImg,mousedown:e.imgStartMove,mousemove:e.imgMove,mouseup:e.createImg,mouseout:e.createImg}}),e._v(" "),a("div",{staticClass:"vicp-img-shade vicp-img-shade-1",style:e.sourceImgShadeStyle}),e._v(" "),a("div",{staticClass:"vicp-img-shade vicp-img-shade-2",style:e.sourceImgShadeStyle})]),e._v(" "),a("div",{staticClass:"vicp-range"},[a("input",{attrs:{type:"range",step:"1",min:"0",max:"100"},domProps:{value:e.scale.range},on:{mousemove:e.zoomChange}}),e._v(" "),a("i",{staticClass:"vicp-icon5",on:{mousedown:e.startZoomSub,mouseout:e.endZoomSub,mouseup:e.endZoomSub}}),e._v(" "),a("i",{staticClass:"vicp-icon6",on:{mousedown:e.startZoomAdd,mouseout:e.endZoomAdd,mouseup:e.endZoomAdd}})]),e._v(" "),e.noRotate?e._e():a("div",{staticClass:"vicp-rotate"},[a("i",{on:{click:e.rotateImg}},[e._v("↻")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-right"},[a("div",{staticClass:"vicp-preview"},[e.noSquare?e._e():a("div",{staticClass:"vicp-preview-item"},[a("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),a("span",[e._v(e._s(e.lang.preview))])]),e._v(" "),e.noCircle?e._e():a("div",{staticClass:"vicp-preview-item vicp-preview-item-circle"},[a("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),a("span",[e._v(e._s(e.lang.preview))])])])])]),e._v(" "),a("div",{staticClass:"vicp-operate"},[a("a",{on:{click:function(t){return e.setStep(1)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),a("a",{staticClass:"vicp-operate-btn",on:{click:e.prepareUpload,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.save))])])]):e._e(),e._v(" "),3==e.step?a("div",{staticClass:"vicp-step3"},[a("div",{staticClass:"vicp-upload"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-loading"},[e._v(e._s(e.lang.loading))]),e._v(" "),a("div",{staticClass:"vicp-progress-wrap"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-progress",style:e.progressStyle})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[a("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\r\n\t\t\t\t")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.loading,expression:"loading === 2"}],staticClass:"vicp-success"},[a("i",{staticClass:"vicp-icon3"}),e._v(" "+e._s(e.lang.success)+"\r\n\t\t\t\t")])]),e._v(" "),a("div",{staticClass:"vicp-operate"},[a("a",{on:{click:function(t){return e.setStep(2)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),a("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.close))])])]):e._e(),e._v(" "),a("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:e.width,height:e.height}})])])},staticRenderFns:[]};var M={data:function(){return{school:"",studentId:"",birthday:"",username:"",collage:"",major:"",klass:"",number:"",year:"",groupList:[],userInfo:{school:"",studentId:"",birthday:"",username:"",collage:"",major:"",klass:"",year:"",number:""},oldPassword:"",newPassword:"",isShowChangePasswordDialog:!1,isShowEditDialog:!1,imgDataUrl:"",params:{token:this.global.token},imgRequest:"http://whale.vipgz4.idcfengye.com/updateImg",headers:{smail:"*_~"},isShowImgDialog:!1}},components:{myUpload:a("VU/8")(D,G,!1,function(e){a("aZ7n")},null,null).exports},created:function(){this.getUserInfo(),this.getGroupList()},methods:{getUserInfo:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/getInfo",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data.status?(e.school=t.data.student_school,e.username=t.data.student_name,e.birthday=t.data.student_birthday.substring(0,10),e.studentId=t.data.student_id,e.collage=t.data.student_department,e.klass=t.data.student_class,e.year=t.data.student_year,e.major=t.data.student_major,e.number=t.data.student_phone):401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},getGroupList:function(){var e=this;this.axios({url:"http://whale.vipgz4.idcfengye.com/getTeam",method:"POST",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(t),200===t.data.status?(t.data.data.forEach(function(t){e.groupList.push(t[1])}),console.log(e.groupList)):401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},showEditDialog:function(){this.isShowEditDialog=!0;var e={year:this.year,school:this.school,studentId:this.studentId,birthday:this.birthday,username:this.username,collage:this.collage,major:this.major,klass:this.klass,number:this.number};this.userInfo=e},editInfo:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/setInfo",data:{token:this.global.token,student_id:this.userInfo.studentId,student_name:this.userInfo.username,student_birthday:this.userInfo.birthday,student_phone:this.userInfo.number,student_school:this.userInfo.school,student_department:this.userInfo.collage,student_major:this.userInfo.major,student_year:this.userInfo.year,student_class:this.userInfo.klass},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data.status?(e.$message({message:"修改成功",type:"success"}),e.isShowEditDialog=!1,e.getUserInfo()):e.$message({message:"修改失败！",type:"info"})})},showImgDialog:function(){this.isShowImgDialog=!this.isShowImgDialog},cropSuccess:function(e,t){console.log("-------- crop success --------"),this.imgDataUrl=e},cropUploadSuccess:function(e,t){console.log("-------- upload success --------"),console.log(e),this.$emit("updateImg",!0)},cropUploadFail:function(e,t){console.log("-------- upload fail --------"),console.log(e),console.log("field: "+t)},showChangePasswordDialog:function(){this.isShowChangePasswordDialog=!0},changePassword:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/ChangePwd",data:{token:this.global.token,old_password:this.oldPassword,new_password:this.newPassword},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data?(e.$message({message:"修改成功！",type:"success"}),e.isShowChangePasswordDialog=!1):e.$message({message:"修改失败！",type:"info"})})}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"person-container"},[a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("学校")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.school))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("学号")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.studentId))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("出生日期\n    ")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.birthday))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("姓名")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.username))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("学院")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.collage))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("入学年份")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.year))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("所属团队")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},e._l(e.groupList,function(t,s){return a("el-tag",{key:s,staticClass:"checkbox-tag",attrs:{type:"success"}},[e._v(e._s(t))])}),1)],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("专业")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.major))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("班级")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.klass))])],1),e._v(" "),a("el-row",{staticClass:"person-cell"},[a("el-col",{attrs:{span:6}},[e._v("联系方式")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:18}},[e._v(e._s(e.number))])],1),e._v(" "),a("div",{staticClass:"person-btns"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.showImgDialog()}}},[e._v("修改头像")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.showEditDialog()}}},[e._v("修改个人信息")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.showChangePasswordDialog()}}},[e._v("修改密码")])],1),e._v(" "),a("el-dialog",{attrs:{title:"标记个人信息",visible:e.isShowEditDialog},on:{"update:visible":function(t){e.isShowEditDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.userInfo,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"学校"}},[a("el-input",{model:{value:e.userInfo.school,callback:function(t){e.$set(e.userInfo,"school",t)},expression:"userInfo.school"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{model:{value:e.userInfo.studentId,callback:function(t){e.$set(e.userInfo,"studentId",t)},expression:"userInfo.studentId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.userInfo.birthday,callback:function(t){e.$set(e.userInfo,"birthday",t)},expression:"userInfo.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学院"}},[a("el-input",{model:{value:e.userInfo.collage,callback:function(t){e.$set(e.userInfo,"collage",t)},expression:"userInfo.collage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"专业"}},[a("el-input",{model:{value:e.userInfo.major,callback:function(t){e.$set(e.userInfo,"major",t)},expression:"userInfo.major"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级"}},[a("el-input",{model:{value:e.userInfo.klass,callback:function(t){e.$set(e.userInfo,"klass",t)},expression:"userInfo.klass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{model:{value:e.userInfo.number,callback:function(t){e.$set(e.userInfo,"number",t)},expression:"userInfo.number"}})],1),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.editInfo()}}},[e._v("修改")])],1)],1)],1),e._v(" "),a("my-upload",{attrs:{field:"UserImg",width:300,height:300,url:e.imgRequest,params:e.params,headers:e.headers,"img-format":"jpg"},on:{"crop-success":e.cropSuccess,"crop-upload-success":e.cropUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.isShowImgDialog,callback:function(t){e.isShowImgDialog=t},expression:"isShowImgDialog"}}),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.isShowChangePasswordDialog,type:"flex",align:"middle"},on:{"update:visible":function(t){e.isShowChangePasswordDialog=t}}},[a("el-row",{staticClass:"person-edit-cell"},[a("el-col",{attrs:{span:8}},[e._v("原密码：")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:16}},[a("el-input",{attrs:{type:"password"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1)],1),e._v(" "),a("el-row",{staticClass:"person-edit-cell"},[a("el-col",{attrs:{span:8}},[e._v("新密码：")]),e._v(" "),a("el-col",{staticClass:"person-cell-content",attrs:{span:16}},[a("el-input",{attrs:{type:"password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)],1),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.changePassword()}}},[e._v("确定修改")])],1)],1)],1)},staticRenderFns:[]};var $=a("VU/8")(M,U,!1,function(e){a("npOy")},"data-v-1e13b58a",null).exports,R={name:"AwardItem",data:function(){return{}},props:["title","eventId","type","tagList","time","department","score","isGroup","isEssay","essayJournal","indiJoin"],components:{},methods:{deleteItem:function(){var e=this;this.$confirm("确定要删除该活动吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(t){e.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/delData",data:{token:e.global.token,Activity_Id:e.eventId},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data?(e.$message({type:"success",message:"删除成功！"}),e.$emit("reflash",!0)):e.$message({type:"error",message:"无权限删除，请联系队长！"})})})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"award-item-container"},[a("div",{staticClass:"award-item-type"},[e._v(e._s(e.isEssay?"论文":"获奖"))]),e._v(" "),a("div",{staticClass:"award-item-title"},[a("el-row",[a("el-col",{attrs:{span:23}},[e._v(e._s(e.title))]),e._v(" "),a("el-col",{staticClass:"award-item-icon",attrs:{span:1}},[a("el-tooltip",{attrs:{effect:"dark",content:"删除该活动",placement:"top-start"}},[a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.deleteItem()}}})])],1)],1)],1),e._v(" "),a("el-collapse",[a("el-collapse-item",{attrs:{name:"1"}},[a("span",{staticClass:"collapse-title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-medal"}),e._v(" "),a("span",[e._v("活动详情")])]),e._v(" "),a("div",{staticClass:"collapse-container"},[e._l(e.tagList,function(t,s){return a("el-tag",{key:s,attrs:{type:"success"}},[e._v(e._s(t))])}),e._v(" "),a("p",{staticClass:"collapse-time"},[e._v("获奖时间："+e._s(e.time))]),e._v(" "),e.isEssay?e._e():a("p",{staticClass:"collapse-award-department"},[e._v("奖项授予单位："+e._s(e.department))]),e._v(" "),e.isEssay?a("p",{staticClass:"collapse-award-department"},[e._v("发布："+e._s(e.essayJournal))]):e._e(),e._v(" "),e.indiJoin.length>0?a("p",[e._v("参与成员:\n          "),e._l(e.indiJoin,function(t,s){return a("el-tag",{key:s,attrs:{type:"info"}},[e._v(e._s(t))])})],2):e._e(),e._v(" "),a("p",{staticClass:"collapse-award-department"},[e._v("分类："+e._s(e.type))]),e._v(" "),a("p",{staticClass:"collapse-score"},[e._v("综测分："+e._s(e.score))])],2)])],1)],1)},staticRenderFns:[]};var O=a("VU/8")(R,E,!1,function(e){a("ous1")},"data-v-5a9a1a7c",null).exports,N={data:function(){return{activeName:"award",awardList:[],beginDate:(new Date).getFullYear()-1+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),endDate:(new Date).toLocaleDateString().replace(/\//g,"-"),awardCategoryList:["社会实践与服务","科技竞赛","文体活动"],userStatis:{},userLoginInfo:{}}},components:{AwardItem:O},created:function(){this.getAwardList(),this.getLoginInfo(),this.getUserStatis()},methods:{getAwardList:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/getData",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(200===t.data.status){var a=t.data.data;console.log(t.data.data);var s=[];a.forEach(function(t){console.log(t);var a={id:t.eventId,type:e.awardCategoryList[t.awardCategory]||"论文",title:t.eventName,isGroup:null!==t.teamJoin,isEssay:!!t.essayId,essayJournal:t.essayJournal||null,tagList:[t.eventRank,t.awardSet||t.essayJournal],indiJoin:t.indiJoin,time:t.eventTime.substring(0,10),department:t.awardUnit||"此项为论文，无授予单位！",score:t.testScore};s.push(a)}),e.awardList=s,console.log(s)}else 401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},turnToAddPage:function(){this.$router.push("/add")},getUserStatis:function(){var e=this,t=[];null!==this.beginDate&&null!==this.endDate&&(t=[this.beginDate,this.endDate]),this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/getStatis",data:{token:this.global.token,eventTime:t},headers:{"Content-Type":"application/json"}}).then(function(t){200===t.data.status?e.userStatis=t.data.data:e.$message({message:"获取信息出错！",type:"info"})})},getLoginInfo:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/getLoginInfo",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data.status?e.userLoginInfo=t.data.data:e.$message({message:"获取信息出错！",type:"info"})})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-check-container"},[a("el-row",[a("el-col",{staticClass:"right-content",attrs:{span:17}},[a("el-tabs",{staticClass:"tabbar",attrs:{stretch:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"奖项",name:"award"}},[a("div",{staticClass:"award-container"},e._l(e.awardList,function(t){return!0!==t.isEssay?a("award-item",{key:t.eventId,attrs:{indiJoin:t.indiJoin,score:t.score,tagList:t.tagList,department:t.department,isGroup:t.isGroup,isEssay:t.isEssay,eventId:t.id,type:t.type,title:t.title,essayJournal:t.essayJournal,time:t.time},on:{reflash:function(t){return e.getAwardList()}}}):e._e()}),1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"论文",name:"person"}},[a("div",{staticClass:"award-container"},e._l(e.awardList,function(t){return!0===t.isEssay?a("award-item",{key:t.eventId,attrs:{indiJoin:t.indiJoin,score:t.score,tagList:t.tagList,department:t.department,isGroup:t.isGroup,isEssay:t.isEssay,eventId:t.id,type:t.type,title:t.title,essayJournal:t.essayJournal,time:t.time},on:{reflash:function(t){return e.getAwardList()}}}):e._e()}),1)])],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"statis-container"},[a("p",{staticClass:"statis-title"},[e._v("你的小鲸鱼统计栏")]),e._v(" "),a("div",{staticClass:"statis-top"},[a("p",{staticClass:"info-list"},[a("span",[e._v("上次登录时间：")]),e._v(" "),a("span",[e._v(e._s(e.userLoginInfo.last_loading))])]),e._v(" "),a("p",{staticClass:"info-list"},[a("span",[e._v("鲸龄：")]),e._v(" "),a("span",[e._v(e._s(e.userLoginInfo.till_time))])])]),e._v(" "),a("div",{staticClass:"statis-middle"},[a("p",{staticClass:"statis-middle-title"},[e._v("筛选统计时间")]),e._v(" "),a("div",{staticClass:"time-pickers"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.beginDate,callback:function(t){e.beginDate=t},expression:"beginDate"}}),e._v(" "),a("div",[e._v("---")]),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getUserStatis()}}},[e._v("统计")])],1),e._v(" "),a("div",{staticClass:"statis-bottom"},[a("p",{staticClass:"info-list"},[a("span",[e._v("综测总分：")]),e._v(" "),a("span",[e._v(e._s(e.userStatis.Total_scores)+"分")])]),e._v(" "),a("p",{staticClass:"info-list"},[a("span",[e._v("总共参与活动数量：")]),e._v(" "),a("span",[e._v(e._s(e.userStatis.Total_activity)+"项")])]),e._v(" "),a("p",{staticClass:"info-list"},[a("span",[e._v("个人奖项数：")]),e._v(" "),a("span",[e._v(e._s(e.userStatis.Total_ind_award)+"项")])]),e._v(" "),a("div",{staticClass:"detail-list"},[a("ul",[a("li",[e._v("社会服务："+e._s(e.userStatis.Total_ind_award_so)+"项")]),e._v(" "),a("li",[e._v("学术竞赛："+e._s(e.userStatis.Total_ind_award_it)+"项")]),e._v(" "),a("li",[e._v("文体活动："+e._s(e.userStatis.Total_ind_award_en)+"项")])])]),e._v(" "),a("p",{staticClass:"info-list"},[a("span",[e._v("个人论文数：")]),e._v(" "),a("span",[e._v(e._s(e.userStatis.Total_ind_essay)+"项")])]),e._v(" "),a("p",{staticClass:"info-list"},[a("span",[e._v("团队奖项数：")]),e._v(" "),a("span",[e._v(e._s(e.userStatis.Total_team_award)+"项")])]),e._v(" "),a("div",{staticClass:"detail-list"},[a("ul",[a("li",[e._v("社会服务："+e._s(e.userStatis.Total_team_award_so)+"项")]),e._v(" "),a("li",[e._v("学术竞赛："+e._s(e.userStatis.Total_team_award_so)+"项")]),e._v(" "),a("li",[e._v("文体活动："+e._s(e.userStatis.Total_team_award_so)+"项")])])]),e._v(" "),a("p",{staticClass:"info-list"},[a("span",[e._v("团队论文数：")]),e._v(" "),a("span",[e._v(e._s(e.userStatis.Total_team_eassy)+"项")])])])])])]),e._v(" "),a("div",{staticClass:"data-check-add-btns",on:{click:function(t){return e.turnToAddPage()}}},[e._v("\n    +\n    "),a("el-tag",{staticClass:"hover-tip",attrs:{type:"primary"}},[e._v("添加项目")])],1)],1)],1)},staticRenderFns:[]};var z=a("VU/8")(N,A,!1,function(e){a("IGXj")},"data-v-2c4a487f",null).exports,P=a("ifoU"),j=a.n(P),J={data:function(){return{projectName:"",paperName:"",awardLevel:"",types:["竞赛活动类","学术论文类"],activityType:"",awardLevelList:["院级","校级","市级","省级","国家级","一般"],awardRank:"",awardRankList:["特等奖","一等奖","二等奖","三等奖","优秀奖"],awardType:"",awardTypeList:["社会实践与服务","科技竞赛","文体活动"],awardDepartment:"",qualityCategory:"",awardTime:"",publishMagazine:"",writerLevel:"",attendedGroup:[],attendedGroupMap:[],belongGroup:"",currentGroupMember:[],attendGroupMemberMap:new j.a,attendGroupMember:[],isShowGroupMemberDialog:!1,isShowWriterLevelDialog:!1,memberWriterLevelList:[],writerLevelList:[1,2,3,4,5,6,7,8,9],score:"",paperLevel:""}},computed:{},components:{},created:function(){this.getGroupList()},methods:{clearAll:function(){this.currentGroupMember=[],this.belongGroup=""},showChooseGroupMemberDialog:function(){this.attendGroupMember=[],this.currentGroupMember=[],this.memberWriterLevelList=[],this.isShowGroupMemberDialog=!0,this.getGroupMemberList()},changeChooseGroupMemberDialog:function(){this.isShowGroupMemberDialog=!0},closeGroupMemberDialog:function(){this.isShowGroupMemberDialog=!1,"学术论文类"===this.activityType&&this.showWriterLevelDialog(),console.log(this.attendedGroup)},showWriterLevelDialog:function(){this.isShowWriterLevelDialog=!0},closeWriterLevelDialog:function(){this.isShowWriterLevelDialog=!1},getGroupList:function(){var e=this;this.axios({url:"http://whale.vipgz4.idcfengye.com/getTeam",method:"POST",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(console.log(t),200===t.data.status){var a=new j.a;t.data.data.forEach(function(t){a.set(t[1],t[0]),e.attendedGroup.push(t[1])}),e.attendedGroupMap=a,console.log(e.attendedGroup)}})},getGroupMemberList:function(){var e=this;this.axios({url:"http://whale.vipgz4.idcfengye.com/getTeamMember",method:"POST",data:{token:this.global.token,team_id:this.attendedGroupMap.get(this.belongGroup)},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data.status&&(t.data.data.Members.forEach(function(t){e.attendGroupMemberMap.set(t[1],t[0]),e.attendGroupMember.push(t[1])}),e.attendGroupMemberMap.set(t.data.data.Leader[1],t.data.data.Leader[0]),e.attendGroupMember.push(t.data.data.Leader[1]))})},addActivity:function(){var e=this,t={};console.log(this.attendedGroupMap);var a=[];this.currentGroupMember.forEach(function(t){console.log(e.attendGroupMemberMap.get(t)),a.push(e.attendGroupMemberMap.get(t))}),this.memberWriterLevelList.length>a.length&&this.memberWriterLevelList.splice(a.length,this.memberWriterLevelList.length-a.length),t="竞赛活动类"===this.activityType?{token:this.global.token,team_id:this.attendedGroupMap.get(this.belongGroup),member:a,Activity_Category:0,Activity_Name:this.projectName,Activity_Time:this.awardTime,Award_Category:this.awardTypeList.indexOf(this.awardType),Activity_Award:this.awardRank,Activity_Level:this.awardLevel,Award_Given:this.awardDepartment,Publish:-1,Author:-1,Score:this.score}:{token:this.global.token,team_id:this.attendedGroupMap.get(this.belongGroup),member:a,Activity_Category:1,Activity_Name:this.paperName,Activity_Time:this.awardTime,Award_Category:-1,Activity_Award:-1,Activity_Level:this.paperLevel,Award_Given:-1,Publish:this.publishMagazine,Author:this.memberWriterLevelList,Score:this.score},console.log(t),this.$confirm("确定要添加吗？请仔细检查信息！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/inputData",data:t}).then(function(t){200===t.data?e.$message({type:"success",message:"添加成功！",onClose:function(){e.$router.push("/main")}}):e.$message({type:"info",message:"添加有误！"})})}).catch(function(){e.$message({type:"info",message:"添加有误！"})})}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group-add-container"},[a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动类别：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.clearAll()}},model:{value:e.activityType,callback:function(t){e.activityType=t},expression:"activityType"}},e._l(e.types,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("论文标题：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.paperName,callback:function(t){e.paperName=t},expression:"paperName"}})],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("奖项名称：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}})],1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动时间：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.awardTime,callback:function(t){e.awardTime=t},expression:"awardTime"}})],1)],1),e._v(" "),a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("所属团队：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.showChooseGroupMemberDialog()}},model:{value:e.belongGroup,callback:function(t){e.belongGroup=t},expression:"belongGroup"}},e._l(e.attendedGroup,function(e,t){return a("el-option",{key:t,attrs:{value:e}})}),1)],1)],1),e._v(" "),a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("参与成员：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[e._l(e.currentGroupMember,function(t,s){return s<5?a("el-tag",{key:t,staticClass:"group-attend-member"},[e._v(e._s(t))]):e._e()}),e._v(" "),e.currentGroupMember.length>5?a("span",{staticClass:"group-attend-member-tip"},[e._v("等人")]):e._e(),e._v(" "),e.currentGroupMember.length>0?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.changeChooseGroupMemberDialog()}}},[e._v("更改")]):e._e()],2)],1),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("奖项类别：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.awardType,callback:function(t){e.awardType=t},expression:"awardType"}},e._l(e.awardTypeList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动奖项：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.awardRank,callback:function(t){e.awardRank=t},expression:"awardRank"}},e._l(e.awardRankList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动等级：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.awardLevel,callback:function(t){e.awardLevel=t},expression:"awardLevel"}},e._l(e.awardLevelList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("奖项授予单位：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.awardDepartment,callback:function(t){e.awardDepartment=t},expression:"awardDepartment"}})],1)],1):e._e(),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("论文等级：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.paperLevel,callback:function(t){e.paperLevel=t},expression:"paperLevel"}})],1)],1):e._e(),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("发布期刊：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.publishMagazine,callback:function(t){e.publishMagazine=t},expression:"publishMagazine"}})],1)],1):e._e(),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("第几作者：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},e._l(e.currentGroupMember,function(t,s){return s<5?a("div",{key:s,staticClass:"wirter"},[a("span",[e._v(e._s(t))]),e._v(" "),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.memberWriterLevelList[s])+"作")])],1):e._e()}),0)],1):e._e(),e._v(" "),a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("综测分数：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.score,callback:function(t){e.score=t},expression:"score"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"参与成员",visible:e.isShowGroupMemberDialog},on:{"update:visible":function(t){e.isShowGroupMemberDialog=t}}},[a("el-checkbox-group",{model:{value:e.currentGroupMember,callback:function(t){e.currentGroupMember=t},expression:"currentGroupMember"}},e._l(e.attendGroupMember,function(e,t){return a("el-checkbox",{key:t,attrs:{label:e}})}),1),e._v(" "),a("div",{staticClass:"add-btns"},[a("el-button",{on:{click:function(t){return e.closeGroupMemberDialog()}}},[e._v("确认")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"作者",visible:e.isShowWriterLevelDialog},on:{"update:visible":function(t){e.isShowWriterLevelDialog=t}}},[a("div",{staticClass:"writer-level-container"},[e._l(e.currentGroupMember,function(t,s){return a("el-row",{key:s,attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:4}},[e._v(e._s(t))]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.memberWriterLevelList[s],callback:function(t){e.$set(e.memberWriterLevelList,s,t)},expression:"memberWriterLevelList[idx]"}},e._l(e.writerLevelList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1)}),e._v(" "),a("div",{staticClass:"add-btns"},[a("el-button",{on:{click:function(t){return e.closeWriterLevelDialog()}}},[e._v("确认")])],1)],2)]),e._v(" "),a("div",{staticClass:"add-btns"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addActivity()}}},[e._v("添加")])],1)],1)},staticRenderFns:[]};var W={data:function(){return{projectName:"",paperName:"",awardLevel:"",types:["竞赛活动类","学术论文类"],activityType:"",awardLevelList:["院级","校级","市级","省级","国家级","一般"],awardRank:"",awardRankList:["特等奖","一等奖","二等奖","三等奖","优秀奖"],awardType:"",awardTypeList:["社会实践与服务","科技竞赛","文体活动"],awardDepartment:"",qualityCategory:"",awardTime:"",publishMagazine:"",writerLevel:"",writerLevelList:[1,2,3,4,5,6,7,8,9],paperLevel:"",score:""}},components:{},methods:{add:function(){var e=this,t={};t="竞赛活动类"===this.activityType?{token:this.global.token,team_id:"",member:[],Activity_Category:0,Activity_Name:this.projectName,Activity_Time:this.awardTime,Award_Category:this.awardTypeList.indexOf(this.awardType),Activity_Award:this.awardRank,Activity_Level:this.awardLevel,Award_Given:this.awardDepartment,Publish:-1,Author:-1,Score:this.score}:{token:this.global.token,team_id:"",member:[],Activity_Category:1,Activity_Name:this.paperName,Activity_Time:this.awardTime,Award_Category:-1,Activity_Award:-1,Activity_Level:this.paperLevel,Award_Given:-1,Publish:this.publishMagazine,Author:this.writerLevel,Score:this.score},console.log(t),this.$confirm("确定要添加吗？请仔细检查信息！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/inputData",data:t}).then(function(t){200===t.data&&e.$message({type:"success",message:"添加成功！",onClose:function(){e.$router.push("/main")}})})}).catch(function(){e.$message({type:"info",message:"添加有误！"})})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"person-add-container"},[a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动类别：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.activityType,callback:function(t){e.activityType=t},expression:"activityType"}},e._l(e.types,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("论文标题：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.paperName,callback:function(t){e.paperName=t},expression:"paperName"}})],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("奖项名称：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}})],1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动时间：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.awardTime,callback:function(t){e.awardTime=t},expression:"awardTime"}})],1)],1),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("奖项类别：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.awardType,callback:function(t){e.awardType=t},expression:"awardType"}},e._l(e.awardTypeList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动奖项：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.awardRank,callback:function(t){e.awardRank=t},expression:"awardRank"}},e._l(e.awardRankList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("活动等级：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.awardLevel,callback:function(t){e.awardLevel=t},expression:"awardLevel"}},e._l(e.awardLevelList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1):e._e(),e._v(" "),"竞赛活动类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("奖项授予单位：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.awardDepartment,callback:function(t){e.awardDepartment=t},expression:"awardDepartment"}})],1)],1):e._e(),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("发布期刊：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.publishMagazine,callback:function(t){e.publishMagazine=t},expression:"publishMagazine"}})],1)],1):e._e(),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("论文等级：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.paperLevel,callback:function(t){e.paperLevel=t},expression:"paperLevel"}})],1)],1):e._e(),e._v(" "),"学术论文类"===e.activityType?a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("第几作者：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.writerLevel,callback:function(t){e.writerLevel=t},expression:"writerLevel"}},e._l(e.writerLevelList,function(e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("综测分数：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.score,callback:function(t){e.score=t},expression:"score"}})],1)],1),e._v(" "),a("div",{staticClass:"add-btns"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1)},staticRenderFns:[]};var B={data:function(){return{}},components:{GroupAdd:a("VU/8")(J,F,!1,function(e){a("qv+H")},"data-v-6e1ef518",null).exports,PersonAdd:a("VU/8")(W,q,!1,function(e){a("BUum")},"data-v-5df52c4b",null).exports},created:function(){},methods:{}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-container"},[a("el-tabs",{staticClass:"tabbar",attrs:{stretch:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"个人活动"}},[a("person-add")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"团队活动"}},[a("group-add")],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(B,H,!1,function(e){a("KnU3")},"data-v-48034531",null).exports,Z=a("lHA8"),K=a.n(Z),Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"output-item-container"},[a("div",{staticClass:"output-item-type"},[e._v(e._s(e.isEssay?"论文":"获奖"))]),e._v(" "),a("div",{staticClass:"output-item-title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),a("div",{staticClass:"collapse-container"},[e._l(e.tagList,function(t,s){return a("el-tag",{key:s,attrs:{type:"warning"}},[e._v(e._s(t))])}),e._v(" "),a("p",{staticClass:"collapse-time"},[e._v("获奖时间："+e._s(e.time))]),e._v(" "),e.isEssay?e._e():a("p",{staticClass:"collapse-award-department"},[e._v("奖项授予单位："+e._s(e.department))]),e._v(" "),e.isEssay?a("p",{staticClass:"collapse-award-department"},[e._v("发布："+e._s(e.essayJournal))]):e._e(),e._v(" "),e.indiJoin.length>0?a("p",[e._v("参与成员:\n          "),e._l(e.indiJoin,function(t,s){return a("el-tag",{key:s,attrs:{type:"info"}},[e._v(e._s(t))])})],2):e._e(),e._v(" "),a("p",{staticClass:"collapse-award-department"},[e._v("分类："+e._s(e.type))]),e._v(" "),a("p",{staticClass:"collapse-score"},[e._v("综测分："+e._s(e.score))])],2)])},staticRenderFns:[]};var X={data:function(){return{eventClass:-1,eventOwn:-1,isShowCopyDialog:!1,isShowSortDialog:!1,isShowDrawer:!1,chooseTags:[],showList:[],awardList:[],result:[],typeList:[{id:0,isChoosed:!1,value:"社会实践与服务"},{id:1,isChoosed:!1,value:"科技竞赛"},{id:2,isChoosed:!1,value:"文体活动"}],levelList:[{id:0,isChoosed:!1,value:"院级"},{id:1,isChoosed:!1,value:"校级"},{id:2,isChoosed:!1,value:"市级"},{id:3,isChoosed:!1,value:"省级"},{id:4,isChoosed:!1,value:"国家级"}],chooseLevel:[],beginTime:"",endTime:"",tableLink:"",sortList:[],awardCategoryList:["社会实践与服务","科技竞赛","文体活动"],mapList:{"姓名":"name","联系方式":"phoneNumber","生日":"birthday","学校":"school","学院":"deptName","专业":"major","年级":"grade","电话":"phoneNumber","班级":"class","活动名字（奖项/论文）":"eventName","颁发单位":"awardUnit","获奖类别":"awardCategory","获奖级别":"eventRank","获奖时间":"eventTime","团队名字":"teamJoin","活动奖项":"awardSet","发布期刊":"essayJournal","第几作者":"essayAuthor","综测分":"testScore"},outputText:"",excelUrl:""}},components:{OutputItem:a("VU/8")({name:"OutputItem",data:function(){return{}},props:["title","eventId","type","tagList","time","department","score","isGroup","isEssay","essayJournal","indiJoin"],components:{},methods:{}},Y,!1,function(e){a("S3kJ")},"data-v-efaaf494",null).exports},created:function(){this.getEventList()},watch:{},methods:{test:function(){this.eventFilter()},seeLevel:function(){this.result.includes("获奖级别")||(this.levelList.forEach(function(e){e.isChoosed=!1}),this.chooseLevel=[])},seeType:function(){this.result.includes("获奖类别")||(this.typeList.forEach(function(e){e.isChoosed=!1}),this.chooseTags=[])},changeSituation:function(e){if(this.result.includes("获奖类别")){var t=e.target.dataset.id;this.$set(this.typeList[t],"isChoosed",!this.typeList[t].isChoosed);var a=[];this.typeList.forEach(function(e){e.isChoosed&&a.push(e.value)}),this.chooseTags=a,this.eventFilter()}else this.$message({message:"尚未勾选！",type:"warning"})},getEventList:function(){var e=this;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/getData",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(200===t.data.status){var a=[];t.data.data.forEach(function(t){var s={id:t.eventId,type:e.awardCategoryList[t.awardCategory]||"论文",title:t.eventName,tagList:[t.eventRank,t.awardSet||t.essayJournal],isGroup:null!==t.teamJoin,isEssay:!!t.essayId,essayJournal:t.essayJournal||null,indiJoin:t.indiJoin,time:t.eventTime.substring(0,10),department:t.awardUnit,score:t.testScore};a.push(s)}),e.awardList=a,e.showList=a}else 401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},changeLevelSituation:function(e){if(this.result.includes("获奖级别")){var t=e.target.dataset.id;this.$set(this.levelList[t],"isChoosed",!this.levelList[t].isChoosed);var a=[];this.levelList.forEach(function(e){e.isChoosed&&a.push(e.value)}),this.chooseLevel=a}else this.$message({message:"尚未勾选！",type:"warning"})},eventFilter:function(){var e=this;if(console.log(this.eventClass),console.log(this.eventOwn),0===this.chooseTags.length&&-1===this.eventOwn&&-1===this.eventClass)this.showList=this.awardList;else{var t=this.awardList.filter(function(t){return 0===e.eventOwn&&0===e.eventClass?!0!==t.isGroup&&!0!==t.isEssay:0===e.eventOwn&&1===e.eventClass?!0!==t.isGroup&&!0===t.isEssay:0===e.eventOwn&&-1===e.eventClass?!0!==t.isGroup:1===e.eventOwn&&0===e.eventClass?!0===t.isGroup&&!0!==t.isEssay:1===e.eventOwn&&1===e.eventClass?!0===t.isGroup&&!0===t.isEssay:1===e.eventOwn&&-1===e.eventClass?!0===t.isGroup:-1===e.eventOwn&&0===e.eventClass?!0!==t.isEssay:-1===e.eventOwn&&1===e.eventClass?!0===t.isEssay:e.awardList}),a=t;this.chooseTags.length>0&&(a=t.filter(function(t){return e.chooseTags.includes(t.type)||t.isEssay})),this.showList=a}},showDrawer:function(){this.isShowDrawer=!0},showDialog:function(){this.isShowSortDialog=!0,this.sortList=[]},getItem:function(e,t){new K.a(this.sortList).size!==this.sortList.length&&this.$message({message:"存在重复项！",type:"warning"})},getTextOutput:function(){var e=this,t=[];if(this.sortList.forEach(function(a){if(t.includes(e.mapList[a]))return e.$message({message:"存在重复值！",type:"warning"}),!1;t.push(e.mapList[a])}),0===t.length||t.length!==this.result.length)return this.$message({message:"请先选择顺序！",type:"warning"}),!1;var a=[this.beginTime,this.endTime];""!==this.endTime&&""!==this.beginTime||(a=[]),console.log(t),-1===this.eventOwn&&(this.eventOwn=""),-1===this.eventClass&&(this.eventClass="");var s=[];this.chooseTags.forEach(function(t){s.push(e.awardCategoryList.indexOf(t))}),this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/OutputData",data:{token:this.global.token,attributions:t,eventOwn:this.eventOwn,eventClass:this.eventClass,eventTime:a,awardCategory:s},headers:{"Content-Type":"application/json"}}).then(function(t){if(200===t.data.status){var a="";t.data.data.forEach(function(e){var t=e.join(" ")+"\n";a+=t}),e.outputText=a}else 401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},successCopy:function(e){this.$message({message:"已成功复制到粘贴板！",type:"success"})},downloadUrl:function(){var e=this,t=[];if(this.sortList.forEach(function(a){if(t.includes(e.mapList[a]))return e.$message({message:"存在重复值！",type:"warning"}),!1;t.push(e.mapList[a])}),console.log(t),console.log(this.result),0===t.length||t.length<this.result.length)return this.$message({message:"请先选择正确顺序！",type:"warning",offset:50}),!1;var a=[this.beginTime,this.endTime];""!==this.endTime&&""!==this.beginTime||(a=[]),console.log(t),-1===this.eventOwn&&(this.eventOwn=""),-1===this.eventClass&&(this.eventClass="");var s=[];this.chooseTags.forEach(function(t){s.push(e.awardCategoryList.indexOf(t))}),this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/DownloadEventData",data:{token:this.global.token,attributions:t,eventOwn:this.eventOwn,eventClass:this.eventClass,eventTime:a,awardCategory:s},headers:{"Content-Type":"application/json"}}).then(function(t){200===t.data.status?(e.excelUrl=t.data.data,e.isShowSortDialog=!1,e.isShowCopyDialog=!0,e.getTextOutput()):401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},dirtDownload:function(){window.open(this.excelUrl)}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"output-container"},[a("div",{staticClass:"output-tag-list"},[a("el-row",{staticClass:"top-bar"},[a("el-col",{attrs:{span:20}},[e._v("筛选类别：")]),e._v(" "),a("el-col",{staticClass:"top-bar-menu",attrs:{span:4}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"筛选条目",placement:"top-start"}},[a("i",{staticClass:"el-icon-menu",on:{click:function(t){return e.showDrawer()}}})])],1)],1),e._v(" "),a("div",{staticClass:"choose-tags-content"},e._l(e.chooseTags,function(t,s){return a("el-tag",{key:s,attrs:{type:"primary"}},[e._v(e._s(t))])}),1)],1),e._v(" "),e._l(e.showList,function(e){return a("output-item",{key:e.eventId,attrs:{score:e.score,indiJoin:e.indiJoin,tagList:e.tagList,isGroup:e.isGroup,isEssay:e.isEssay,department:e.department,eventId:e.id,type:e.type,title:e.title,essayJournal:e.essayJournal,time:e.time}})}),e._v(" "),a("el-drawer",{attrs:{visible:e.isShowDrawer,direction:"rtl",size:"20%",modal:!1},on:{"update:visible":function(t){e.isShowDrawer=t}}},[a("el-checkbox-group",{model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[a("div",{staticClass:"checkbox-cell"},[a("el-radio-group",{on:{change:function(t){return e.test()}},model:{value:e.eventOwn,callback:function(t){e.eventOwn=t},expression:"eventOwn"}},[a("el-radio",{attrs:{label:-1}},[e._v("所有")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("个人")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("团队")])],1)],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-radio-group",{on:{change:function(t){return e.eventFilter()}},model:{value:e.eventClass,callback:function(t){e.eventClass=t},expression:"eventClass"}},[a("el-radio",{attrs:{label:-1}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("奖项")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("论文")])],1)],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"姓名"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"班级"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"学校"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"学院"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"专业"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"电话"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"活动名字（奖项/论文）"}})],1),e._v(" "),1!=e.eventClass?a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"颁发单位"}})],1):e._e(),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"综测分"}})],1),e._v(" "),1!=e.eventClass?a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"获奖类别"},on:{change:function(t){return e.seeType()}}}),e._v(" "),a("div",e._l(e.typeList,function(t){return a("el-tag",{key:t.id,staticClass:"checkbox-tag",attrs:{type:t.isChoosed?"success":"info","data-id":t.id},on:{click:function(t){return e.changeSituation(t)}}},[e._v(e._s(t.value))])}),1)],1):e._e(),e._v(" "),1!=e.eventClass?a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"活动奖项"}})],1):e._e(),e._v(" "),0!=e.eventClass?a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"发布期刊"}})],1):e._e(),e._v(" "),0!=e.eventClass?a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"第几作者"}})],1):e._e(),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"获奖级别"},on:{change:function(t){return e.seeLevel()}}}),e._v(" "),a("div",e._l(e.levelList,function(t){return a("el-tag",{key:t.id,staticClass:"checkbox-tag",attrs:{type:t.isChoosed?"success":"info","data-id":t.id},on:{click:function(t){return e.changeLevelSituation(t)}}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"获奖时间"}}),e._v(" "),a("div",{staticClass:"checkbox-date"},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始时间","value-format":"yyyy-MM-dd"},model:{value:e.beginTime,callback:function(t){e.beginTime=t},expression:"beginTime"}})],1),e._v(" "),a("div",{staticClass:"checkbox-date"},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束时间","value-format":"yyyy-MM-dd"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)],1)]),e._v(" "),a("div",{staticClass:"output-btns"},[a("el-button",{on:{click:function(t){return e.showDialog()}}},[e._v("确认筛选")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"排序",visible:e.isShowSortDialog},on:{"update:visible":function(t){e.isShowSortDialog=t}}},[a("div",{staticClass:"sort-container"},[e._l(e.result,function(t,s){return a("el-row",{key:s,attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:3}},[e._v("第"+e._s(s+1)+"项")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{"data-index":s},on:{change:e.getItem},model:{value:e.sortList[s],callback:function(t){e.$set(e.sortList,s,t)},expression:"sortList[index]"}},e._l(e.result,function(e,t){return a("el-option",{key:t,attrs:{value:e}})}),1)],1)],1)}),e._v(" "),a("div",{staticClass:"sort-container-btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.downloadUrl()}}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{type:"success"}},[e._v("重置")])],1)],2)]),e._v(" "),a("el-dialog",{attrs:{visible:e.isShowCopyDialog},on:{"update:visible":function(t){e.isShowCopyDialog=t}}},[a("div",{staticClass:"copy-container"},[a("p",{staticClass:"text-pre"},[e._v("文本预览")]),e._v(" "),a("el-input",{staticClass:"preview",attrs:{type:"textarea",rows:"10"},model:{value:e.outputText,callback:function(t){e.outputText=t},expression:"outputText"}}),e._v(" "),a("div",[e._v("文件下载链接为："+e._s(e.excelUrl))]),e._v(" "),a("div",{staticClass:"copy-container-btns"},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.outputText,expression:"outputText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.successCopy,expression:"successCopy",arg:"success"}],attrs:{type:"success"}},[e._v("点击复制文本")]),e._v(" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.excelUrl,expression:"excelUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.successCopy,expression:"successCopy",arg:"success"}],attrs:{type:"success"}},[e._v("点击复制链接")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.dirtDownload()}}},[e._v("下载导出文件")])],1)],1)])],2)},staticRenderFns:[]};var ee=a("VU/8")(X,Q,!1,function(e){a("llIs")},"data-v-0b7a7db5",null).exports,te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about-us-container"},[e._m(0),e._v(" "),a("p",{staticClass:"header"},[e._v("Whale Printer(鲸记)")]),e._v(" "),a("p",{staticClass:"intro"},[e._v("是一款记录大学生活动获奖经历小程序,可以根据用户的需求，个性化导出内容以便奖项填表、简历书写、活动报名等。")]),e._v(" "),e._m(1),e._v(" "),a("el-row",{staticClass:"bottom",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"suggest-left"},[a("el-input",{attrs:{type:"textarea",rows:"3",cols:"10",placeholder:"请写下您的建议···"},model:{value:e.suggest,callback:function(t){e.suggest=t},expression:"suggest"}}),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendSuggest()}}},[e._v("发送")])],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"developer"},[a("p",[e._v("交互微信小程序上层-张可欣")]),e._v(" "),a("p",[e._v("网络服务器接口中层-薛海威")]),e._v(" "),a("p",[e._v("核心数据库开发底层-韦明杰")])]),e._v(" "),a("div",{staticClass:"support"},[a("p",[e._v("欢迎捐赠以维持服务器运营")]),e._v(" "),a("p",[e._v("嗷嗷待哺的嗨威:18320919861")])])])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-content"},[t("img",{staticClass:"logo",attrs:{src:a("kWZM")}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"intro2"},[t("p",[this._v("我们的小蓝鲸刚刚来到这个世界")]),this._v(" "),t("p",[this._v("或许有这样那样的缺点，或许有你喜欢的特点")]),this._v(" "),t("p",[this._v("但我们非常希望你们能够提供宝贵的建议")]),this._v(" "),t("p",[this._v("你们的鼓励是我们前进路上最足的底气")])])}]};var ae=a("VU/8")({data:function(){return{suggest:""}},components:{},methods:{sendSuggest:function(){this.$message({message:"发送成功！",type:"success"})}}},te,!1,function(e){a("Rpvv")},"data-v-6702e90f",null).exports,se={data:function(){return{awardCategoryList:["社会实践与服务","科技竞赛","文体活动"],isShowCopyDialog:!1,isShowSortDialog:!1,isShowDrawer:!1,sortList:[],account:[],result:[],resultMap:new j.a([["姓名","name"],["生日","birthday"],["电话","phoneNumber"],["学校","school"],["学院","deptName"],["专业","major"],["年级","grade"],["班级","class"]]),currentGroup:"",groupList:[],groupListMap:new j.a,isShowAddGroupDialog:!1,addGroup:{groupId:"",groupKey:""},isShowCreateGroupDialog:!1,createGroup:{groupName:"",groupKey:""},groupMemberList:[],groupMemberNameList:[],isCurrentGroupLeader:!1,leader:{studentId:"",studentName:""},awardList:[],outputText:"",excelUrl:""}},components:{AwardItem:O},computed:{currentTeamId:function(){return this.groupListMap.get(this.currentGroup)}},created:function(){this.getGroupList()},methods:{showAddGroupDialog:function(){this.isShowAddGroupDialog=!0},addGroupFun:function(){var e=this;this.axios({url:"http://whale.vipgz4.idcfengye.com/attendTeam",method:"POST",data:{token:this.global.token,team_id:this.addGroup.groupId,team_key:this.addGroup.groupKey},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data?(e.$message({message:"成功加入！",type:"success"}),e.isShowAddGroupDialog=!1,e.getGroupList()):401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},showCreateGroupDialog:function(){this.isShowCreateGroupDialog=!0},exitGroup:function(){var e=this;this.$alert("是否要退出当前团队？","退出团队",{confirmButtonText:"确定",callback:function(t){e.axios({url:"http://whale.vipgz4.idcfengye.com/exitTeam",method:"POST",data:{token:e.global.token,team_id:e.currentTeamId},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data?(e.$message({message:"已成功退出当前团队！",type:"success"}),e.getGroupList(),e.currentGroup=null):401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})}})},getGroupList:function(){var e=this;this.axios({url:"http://whale.vipgz4.idcfengye.com/getTeam",method:"POST",data:{token:this.global.token},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(t),200===t.data.status?(e.groupList=[],e.groupListMap=new j.a,t.data.data.forEach(function(t){e.groupListMap.set(t[1],t[0]),e.groupList.push(t[1])}),e.currentGroup=e.groupList[0],e.getGroupActivity()):401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},getGroupActivity:function(){var e=this;this.awardList=[],this.checkLeader(),this.axios({url:"http://whale.vipgz4.idcfengye.com/getTeamEvent",method:"POST",data:{token:this.global.token,team_id:this.currentTeamId},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(e.getGroupMemberList(),200===t.data.status){var a=t.data.data;if(""===t.data.data)return;var s=[];a.forEach(function(t){var a={id:t.eventId,type:e.awardCategoryList[t.awardCategory]||"论文",title:t.eventName,tagList:[t.eventRank,t.awardSet||t.essayJournal],time:t.eventTime.substring(0,10),isGroup:null!==t.teamJoin,indiJoin:t.indiJoin,isEssay:!!t.essayId,essayJournal:t.essayJournal||null,department:t.awardUnit||"此项为论文，无授予单位！",score:t.testScore};s.push(a)}),e.awardList=s}else 401===t.data.status?(e.$message({message:"token过期！请重新登录！",type:"error"}),e.$router.push("/login")):e.$message({message:"服务器开小差啦~",type:"warning"})})},checkLeader:function(){var e=this;this.axios({url:"http://whale.vipgz4.idcfengye.com/checkLeader",method:"POST",data:{token:this.global.token,team_id:this.currentTeamId},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data?e.isCurrentGroupLeader=!0:e.isCurrentGroupLeader=!1})},createGroupFun:function(){var e=this;this.axios({url:"http://whale.vipgz4.idcfengye.com/createTeam",method:"POST",data:{token:this.global.token,team_name:this.createGroup.groupName,team_key:this.createGroup.groupKey},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200===t.data.status?e.$confirm("创建成功！团队编号为"+t.data.team_id+"，可以和密码一起分享给队员啦！","提示",{confirmButtonText:"确定"}).then(function(t){e.isShowCreateGroupDialog=!1,e.getGroupList()}):401===t.data.status?(e.$message({message:"token过期！请重新登录！",type:"error"}),e.$router.push("/login")):e.$message({message:"服务器开小差啦~",type:"warning"})})},getGroupMemberList:function(){var e=this;this.groupMemberList=[],this.getGroupMemberNameList=[],this.axios({url:"http://whale.vipgz4.idcfengye.com/getTeamMember",method:"POST",data:{token:this.global.token,team_id:this.currentTeamId},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(200===t.data.status){e.groupMemberNameList=[],e.groupMemberList=[],t.data.data.Members.forEach(function(t){e.groupMemberList.push(t[0]),e.groupMemberNameList.push(t[1])}),e.groupMemberList.push(t.data.data.Leader[0]),e.groupMemberNameList.push(t.data.data.Leader[1]);var a={studentId:t.data.data.Leader[0],studentName:t.data.data.Leader[1]};e.leader=a,console.log(e.groupList),console.log(e.groupMemberNameList)}else 401===t.data.status?(e.$message({message:"token过期！请重新登录！",type:"error"}),e.$router.push("/login")):e.$message({message:"服务器开小差啦~",type:"warning"})})},showDrawer:function(){this.isShowDrawer=!0,this.getGroupMemberList(),console.log(this.account)},clearAccount:function(){this.groupMemberList=[]},showDialog:function(){this.isShowSortDialog=!0,this.sortList=[]},getItem:function(e,t){new K.a(this.sortList).size!==this.sortList.length&&this.$message({message:"已选过此项！",type:"warning"})},downloadUrl:function(){var e=this,t=[];if(this.sortList.forEach(function(a){if(t.includes(e.resultMap.get(a)))return e.$message({message:"存在重复值！",type:"warning"}),!1;t.push(e.resultMap.get(a))}),0===t.length||t.length!==this.result.length)return this.$message({message:"请先选择顺序！",type:"warning"}),!1;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/DownloadTeamMemberInfo",data:{token:this.global.token,accounts:this.account,attributions:t},headers:{"Content-Type":"application/json"}}).then(function(t){200===t.data.status?(e.excelUrl=t.data.data,e.isShowSortDialog=!1,e.isShowCopyDialog=!0,e.getTextOutput()):401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},getTextOutput:function(){var e=this,t=[];if(this.sortList.forEach(function(a){if(t.includes(e.resultMap.get(a)))return e.$message({message:"存在重复值！",type:"warning"}),!1;t.push(e.resultMap.get(a))}),0===t.length||t.length!==this.result.length)return this.$message({message:"请先选择顺序！",type:"warning"}),!1;this.axios({method:"POST",url:"http://whale.vipgz4.idcfengye.com/OutPutTeamMemberInfo",data:{token:this.global.token,accounts:this.account,attributions:t},headers:{"Content-Type":"application/json"}}).then(function(t){if(200===t.data.status){var a="";t.data.data.forEach(function(e){var t=e.join(" ")+"\n";a+=t}),e.outputText=a}else 401===t.data.status?e.$message({message:"token过期！请重新登录！",type:"error"}):e.$message({message:"服务器开小差啦~",type:"warning"})})},successCopy:function(e){this.$message({message:"已成功复制到粘贴板！",type:"success"})},dirtDownload:function(){window.open(this.excelUrl)}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group-container"},[a("el-row",{staticStyle:{height:"100%"},attrs:{type:"flex"}},[a("el-col",{staticClass:"content",attrs:{span:17}},[a("p",{staticClass:"group-title"},[a("span",[e._v("当前团队："+e._s(e.currentGroup||"暂无团队"))]),e._v(" "),e.currentGroup?a("span",[e._v("团队邀请码："+e._s(e.currentTeamId))]):e._e(),e._v(" "),e.currentGroup?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.currentTeamId,expression:"currentTeamId",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.successCopy,expression:"successCopy",arg:"success"}],attrs:{size:"small",type:"success"}},[e._v("复制邀请码")]):e._e()],1),e._v(" "),a("div",{staticClass:"award-container",staticStyle:{height:"90%","overflow-y":"scroll","overflow-x":"hidden"}},[e._l(e.awardList,function(t){return a("award-item",{key:t.eventId,attrs:{indiJoin:t.indiJoin,score:t.score,tagList:t.tagList,department:t.department,eventId:t.id,isGroup:t.isGroup,isEssay:t.isEssay,essayJournal:t.essayJournal,type:t.type,title:t.title,time:t.time},on:{reflash:function(t){return e.getGroupActivity()}}})}),e._v(" "),0===e.awardList.length?a("p",[e._v("暂无活动或论文！")]):e._e()],2)]),e._v(" "),a("el-col",{staticClass:"group-operate",attrs:{span:6}},[a("div",{staticClass:"btns-container"},[a("el-button",{staticClass:"buttons",on:{click:function(t){return e.showAddGroupDialog()}}},[e._v("加入团队")])],1),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getGroupActivity()}},model:{value:e.currentGroup,callback:function(t){e.currentGroup=t},expression:"currentGroup"}},e._l(e.groupList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{on:{click:function(t){return e.showCreateGroupDialog()}}},[e._v("创建团队")])],1),e._v(" "),a("div",{staticClass:"btns-container"},[e.isCurrentGroupLeader?e._e():a("el-button",{on:{click:function(t){return e.exitGroup()}}},[e._v("退出当前团队")])],1),e._v(" "),a("div",{staticClass:"btns-container"},[e.isCurrentGroupLeader?a("el-button",{on:{click:function(t){return e.showDrawer()}}},[e._v("导出团队信息")]):e._e()],1),e._v(" "),a("div",{staticClass:"btns-container"},[e.isCurrentGroupLeader?a("el-button",{on:{click:function(t){return e.exitGroup()}}},[e._v("解散当前团队")]):e._e()],1),e._v(" "),e.currentGroup?a("div",{staticClass:"member"},[a("p",{staticClass:"member-title"},[e._v("队员信息")]),e._v(" "),a("p",[e._v("队长："+e._s(e.leader.studentId)+" "+e._s(e.leader.studentName))]),e._v(" "),e._l(e.groupMemberList,function(t,s){return s<e.groupMemberList.length-1?a("p",{key:s},[e._v("成员"+e._s(s+1)+":"+e._s(t)+" "+e._s(e.groupMemberNameList[s]))]):e._e()})],2):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"加入团队",visible:e.isShowAddGroupDialog},on:{"update:visible":function(t){e.isShowAddGroupDialog=t}}},[a("el-row",{staticClass:"add-cell",attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:6}},[e._v("团队ID：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.addGroup.groupId,callback:function(t){e.$set(e.addGroup,"groupId",t)},expression:"addGroup.groupId"}})],1)],1),e._v(" "),a("el-row",{staticClass:"add-cell"},[a("el-col",{attrs:{span:6}},[e._v("团队密码：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.addGroup.groupKey,callback:function(t){e.$set(e.addGroup,"groupKey",t)},expression:"addGroup.groupKey"}})],1)],1),e._v(" "),a("div",{staticClass:"add-btns"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addGroupFun()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"创建团队",visible:e.isShowCreateGroupDialog},on:{"update:visible":function(t){e.isShowCreateGroupDialog=t}}},[a("el-row",{staticClass:"add-cell",attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:6}},[e._v("团队名称：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.createGroup.groupName,callback:function(t){e.$set(e.createGroup,"groupName",t)},expression:"createGroup.groupName"}})],1)],1),e._v(" "),a("el-row",{staticClass:"add-cell",attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:6}},[e._v("团队密码：")]),e._v(" "),a("el-col",{staticClass:"add-cell-content",attrs:{span:18}},[a("el-input",{model:{value:e.createGroup.groupKey,callback:function(t){e.$set(e.createGroup,"groupKey",t)},expression:"createGroup.groupKey"}})],1)],1),e._v(" "),a("div",{staticClass:"add-btns"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.createGroupFun()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-drawer",{attrs:{visible:e.isShowDrawer,direction:"rtl",size:"20%",modal:!1},on:{"update:visible":function(t){e.isShowDrawer=t},close:function(t){return e.clearAccount()}}},[a("p",[e._v("选择导出成员的学号")]),e._v(" "),a("el-checkbox-group",{model:{value:e.account,callback:function(t){e.account=t},expression:"account"}},[e._l(e.groupMemberList,function(e,t){return a("div",{key:t,staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:e}})],1)}),e._v(" "),a("div",{staticClass:"divider"})],2),e._v(" "),a("el-checkbox-group",{model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"姓名"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"生日"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"电话"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"学校"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"学院"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"专业"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"年级"}})],1),e._v(" "),a("div",{staticClass:"checkbox-cell"},[a("el-checkbox",{attrs:{label:"班级"}})],1)]),e._v(" "),a("div",{staticClass:"output-btns"},[a("el-button",{on:{click:function(t){return e.showDialog()}}},[e._v("确认筛选")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"排序",visible:e.isShowSortDialog},on:{"update:visible":function(t){e.isShowSortDialog=t}}},[a("div",{staticClass:"sort-container"},[e._l(e.result,function(t,s){return a("el-row",{key:s,attrs:{type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:3}},[e._v("第"+e._s(s+1)+"项")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{"data-index":s},on:{change:e.getItem},model:{value:e.sortList[s],callback:function(t){e.$set(e.sortList,s,t)},expression:"sortList[index]"}},e._l(e.result,function(e,t){return a("el-option",{key:t,attrs:{value:e}})}),1)],1)],1)}),e._v(" "),a("div",{staticClass:"sort-container-btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.downloadUrl()}}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{type:"success"}},[e._v("重置")])],1)],2)]),e._v(" "),a("el-dialog",{attrs:{visible:e.isShowCopyDialog},on:{"update:visible":function(t){e.isShowCopyDialog=t}}},[a("div",{staticClass:"copy-container"},[a("p",{staticClass:"text-pre"},[e._v("文本预览")]),e._v(" "),a("el-input",{staticClass:"preview",attrs:{type:"textarea"},model:{value:e.outputText,callback:function(t){e.outputText=t},expression:"outputText"}}),e._v(" "),a("div",[e._v("文件下载链接为："+e._s(e.excelUrl))]),e._v(" "),a("div",{staticClass:"copy-container-btns"},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.outputText,expression:"outputText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.successCopy,expression:"successCopy",arg:"success"}],attrs:{type:"success"}},[e._v("点击复制文本")]),e._v(" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.excelUrl,expression:"excelUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.successCopy,expression:"successCopy",arg:"success"}],attrs:{type:"success"}},[e._v("点击复制链接")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.dirtDownload()}}},[e._v("下载导出文件")])],1)],1)])],1)},staticRenderFns:[]};var ie=a("VU/8")(se,ne,!1,function(e){a("d3Yb")},"data-v-5cf099be",null).exports,oe={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"guide-container"},[this._v("\n    下一个版本即将更新~\n")])},staticRenderFns:[]};var re=a("VU/8")({data:function(){return{}},components:{},methods:{}},oe,!1,function(e){a("zWB7")},"data-v-330c561a",null).exports,le={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"setting-container"},[this._v("\n  下一个版本即将更新~\n")])},staticRenderFns:[]};var ce=a("VU/8")({data:function(){return{}},components:{},methods:{}},le,!1,function(e){a("d0ia")},"data-v-1cd6ddee",null).exports;s.default.use(r.a);var ue=new r.a({routes:[{path:"/",name:"Login",component:v},{path:"/register",name:"Register",component:u},{path:"/main",name:"Main",component:g,children:[{path:"/person",name:$,component:$},{path:"",name:z,component:z},{path:"/add",name:V,component:V},{path:"/output",name:ee,component:ee},{path:"/AboutUs",name:ae,component:ae},{path:"/Group",name:ie,component:ie},{path:"/Guide",name:re,component:re},{path:"/Setting",name:ce,component:ce}]}]}),de=a("zL8q"),pe=a.n(de),ve=(a("tvR6"),{baseURL:"http://whale.vipgz1.idcfengye.com",account:"",token:""}),he=a("wvfG"),me=a.n(he),ge=a("mtWM"),fe=a.n(ge),_e=a("M4fF"),we=a.n(_e),ye=fe.a.create({baseURL:Object({NODE_ENV:"production",API_HOST:"http://whale.vipgz4.idcfengye.com"}).BASE_URL,timeout:4e4}),be=void 0,Ce=0;function ke(){Ce--,0===(Ce=Math.max(Ce,0))&&xe()}var xe=we.a.debounce(function(){be.close(),be=null},300);ye.interceptors.request.use(function(e){var t;return!1!==e.headers.showLoading&&(t=e.headers.loadingTarget,0!==Ce||be||(be=de.Loading.service({lock:!0,text:"Loading...",background:"rgba(255, 255, 255, 0.5)",target:t||"body"})),Ce++),e},function(e){return!1!==e.headers.showLoading&&ke(),de.Message.error("请求超时!"),_.a.resolve(e)}),ye.interceptors.response.use(function(e){return!1!==e.config.headers.showLoading&&ke(),e},function(e){if(!1!==e.config.headers.showLoading&&ke(),e.response&&e.response.data&&e.response.data.message){var t=JSON.parse(e.response.data.message);de.Message.error(t.message)}else de.Message.error(e.message);return _.a.reject(e)});var Le=ye;s.default.use(me.a),s.default.use(pe.a),s.default.prototype.global=ve,s.default.prototype.axios=Le,s.default.config.productionTip=!1,new s.default({el:"#app",router:ue,components:{App:o},template:"<App/>"})},Rpvv:function(e,t){},S3kJ:function(e,t){},aZ7n:function(e,t){},d0ia:function(e,t){},d3Yb:function(e,t){},kWZM:function(e,t,a){e.exports=a.p+"static/img/LOGO.68dce7c.png"},llIs:function(e,t){},n37O:function(e,t){},npOy:function(e,t){},ous1:function(e,t){},"qv+H":function(e,t){},tvR6:function(e,t){},zWB7:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9e7b5ae12f8ba011d970.js.map